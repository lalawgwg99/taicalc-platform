<!DOCTYPE html>
<html lang="zh-TW" class="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>成本計算機｜TaiCalc</title>
    <meta name="description" content="快速計算產品成本、毛利率、損益兩平點。即時試算，隱私不留痕。">
    <meta name="keywords" content="成本計算,毛利率,損益兩平,定價計算">
    <link rel="canonical" href="https://taicalc.com/tools/cost">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        stone: {
                            50: '#fafaf9',
                            800: '#292524',
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body class="bg-stone-50 text-stone-800 min-h-screen flex flex-col font-sans">
    <div id="app" v-cloak class="flex-grow max-w-2xl mx-auto w-full px-4 sm:px-6 py-8">

        <!-- Header / Global Nav -->
        <nav class="flex items-center justify-between mb-8">
            <a href="../index.html" class="flex items-center gap-2 group">
                <span
                    class="text-xl font-bold tracking-tight text-stone-800 group-hover:text-amber-600 transition-colors">TaiCalc</span>
            </a>
            <div class="flex gap-4 sm:gap-6 text-sm font-medium text-stone-500">
                <a href="../index.html" class="hover:text-stone-900 transition-colors">首頁</a>
                <a href="../categories/finance.html" class="hover:text-stone-900 transition-colors">退休理財</a>
                <a href="../categories/life.html" class="hover:text-stone-900 transition-colors">生活</a>
                <a href="../categories/tools.html" class="hover:text-stone-900 transition-colors">工具</a>
            </div>
        </nav>

        <!-- Breadcrumb -->
        <div class="text-sm text-stone-500 mb-6 flex items-center gap-2">
            <a href="../index.html" class="hover:text-stone-800 transition-colors">首頁</a>
            <span>/</span>
            <a href="../categories/tools.html" class="hover:text-stone-800 transition-colors">實用工具</a>
            <span>/</span>
            <span class="text-stone-900 font-medium">成本計算</span>
        </div>

        <header class="mb-8">
            <div class="flex items-center justify-between mb-2">
                <h1 class="text-2xl sm:text-3xl font-bold text-stone-800 tracking-tight">成本計算機</h1>
                <span
                    class="text-xs px-2.5 py-1 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 font-medium">毛利試算</span>
            </div>
            <p class="text-stone-500 text-sm">快速計算產品成本、毛利率、損益兩平點</p>
        </header>

        <main class="card bg-white rounded-2xl p-6 shadow-sm border border-stone-200 space-y-6">

            <!-- 輸入區 -->
            <div class="space-y-6">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="material" class="block text-xs font-semibold text-stone-500 mb-2">材料成本</label>
                        <div class="relative">
                            <input id="material" type="number" v-model.number="material"
                                class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2.5 px-3 pl-8 text-stone-800 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                            <span class="absolute left-3 top-2.5 text-stone-400">$</span>
                        </div>
                    </div>
                    <div>
                        <label for="labor" class="block text-xs font-semibold text-stone-500 mb-2">人工成本</label>
                        <div class="relative">
                            <input id="labor" type="number" v-model.number="labor"
                                class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2.5 px-3 pl-8 text-stone-800 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                            <span class="absolute left-3 top-2.5 text-stone-400">$</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="overhead" class="block text-xs font-semibold text-stone-500 mb-2">其他費用</label>
                        <div class="relative">
                            <input id="overhead" type="number" v-model.number="overhead"
                                class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2.5 px-3 pl-8 text-stone-800 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                            <span class="absolute left-3 top-2.5 text-stone-400">$</span>
                        </div>
                    </div>
                    <div>
                        <label for="quantity" class="block text-xs font-semibold text-stone-500 mb-2">預計數量</label>
                        <input id="quantity" type="number" v-model.number="quantity" min="1"
                            class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2.5 px-3 text-stone-800 font-medium focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                    </div>
                </div>

                <div>
                    <label for="price"
                        class="block text-xs font-semibold text-stone-500 mb-2 uppercase tracking-wide">預計售價</label>
                    <div class="relative">
                        <input id="price" type="number" v-model.number="price"
                            class="w-full bg-stone-50 border border-stone-200 rounded-xl py-3 px-4 pl-9 text-stone-800 text-xl font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all">
                        <span class="absolute left-4 top-3.5 text-stone-400 font-bold">$</span>
                    </div>
                </div>
            </div>

            <!-- 結果區 -->
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-stone-50 rounded-xl p-4 border border-stone-200 text-center">
                    <p class="text-xs text-stone-500 mb-1">總成本</p>
                    <p class="text-xl font-bold font-mono text-stone-700">${{ fmt(totalCost) }}</p>
                </div>
                <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-100 text-center">
                    <p class="text-xs text-emerald-600 mb-1">單位成本</p>
                    <p class="text-xl font-bold font-mono text-emerald-600">${{ fmt(unitCost) }}</p>
                </div>
                <div class="bg-stone-50 rounded-xl p-4 border border-stone-200 text-center">
                    <p class="text-xs text-stone-500 mb-1">毛利率</p>
                    <p class="text-xl font-bold font-mono" :class="margin >= 0 ? 'text-emerald-600' : 'text-rose-500'">
                        {{ margin.toFixed(1) }}%
                    </p>
                </div>
                <div class="bg-stone-50 rounded-xl p-4 border border-stone-200 text-center">
                    <p class="text-xs text-stone-500 mb-1">損益兩平</p>
                    <p class="text-xl font-bold font-mono text-blue-600">
                        {{ breakeven > 0 ? breakeven + ' 件' : '—' }}
                    </p>
                </div>
            </div>

            <!-- 判斷提示 -->
            <div class="text-sm text-center py-3 rounded-lg border" :class="verdictClass">
                {{ verdict }}
            </div>

            <!-- 複製按鈕 -->
            <button @click="copyResult"
                class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3.5 rounded-xl transition-all active:scale-[0.98] flex items-center justify-center gap-2 shadow-lg shadow-emerald-600/20">
                <svg v-if="!copied" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                    fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
                    <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
                </svg>
                <svg v-else xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                {{ copied ? '已複製結果！' : '複製結果' }}
            </button>
        </main>

        <footer class="text-center mt-12 text-stone-400 text-sm pb-8">
            © 2026 TaiCalc
        </footer>
    </div>

    <script>
        const { createApp, ref, computed } = Vue

        createApp({
            setup() {
                const material = ref(1000)
                const labor = ref(500)
                const overhead = ref(200)
                const quantity = ref(10)
                const price = ref(250)
                const copied = ref(false)

                const fmt = (n) => n.toLocaleString('zh-TW')

                const totalCost = computed(() => (material.value || 0) + (labor.value || 0) + (overhead.value || 0))

                const unitCost = computed(() => {
                    const q = quantity.value || 1
                    return Math.round((totalCost.value / q) * 100) / 100
                })

                const margin = computed(() => {
                    const p = price.value || 0
                    if (p <= 0) return 0
                    return ((p - unitCost.value) / p) * 100
                })

                const breakeven = computed(() => {
                    const p = price.value || 0
                    if (unitCost.value <= 0 || p <= unitCost.value) return 0
                    return Math.ceil(totalCost.value / (p - unitCost.value))
                })

                const verdict = computed(() => {
                    if (margin.value >= 20) return '✅ 利潤空間健康，可考慮執行'
                    if (margin.value >= 0) return '⚠️ 利潤偏低，建議重新評估定價或成本'
                    return '❌ 目前定價會虧損，請調整'
                })

                const verdictClass = computed(() => {
                    if (margin.value >= 20) return 'bg-emerald-50 text-emerald-700 border-emerald-200'
                    if (margin.value >= 0) return 'bg-amber-50 text-amber-700 border-amber-200'
                    return 'bg-rose-50 text-rose-700 border-rose-200'
                })

                const copyResult = async () => {
                    const text = `成本分析：總成本 $${fmt(totalCost.value)}，單位成本 $${fmt(unitCost.value)}，毛利率 ${margin.value.toFixed(1)}%，損益兩平 ${breakeven.value} 件`
                    await navigator.clipboard.writeText(text)
                    copied.value = true
                    setTimeout(() => copied.value = false, 1500)
                }

                return {
                    material, labor, overhead, quantity, price, copied,
                    totalCost, unitCost, margin, breakeven,
                    verdict, verdictClass, fmt, copyResult
                }
            }
        }).mount('#app')
    </script>
</body>

</html>