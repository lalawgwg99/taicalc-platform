<!DOCTYPE html>
<html lang="zh-TW" class="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤–é€æ”¶å…¥è¨ˆç®—ï½œTaiCalc</title>
    <meta name="description" content="è¨ˆç®—å¤–é€å¹³å°å¯¦éš›æ”¶å…¥ï¼Œæ‰£é™¤æ²¹éŒ¢ã€æ©Ÿè»ŠæŠ˜èˆŠå¾Œçš„æ·¨æ‰€å¾—ã€‚">
    <link rel="canonical" href="https://taicalc.com/tools/delivery-income">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        stone: {
                            50: '#fafaf9',
                            800: '#292524',
                        }
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../css/style.css">
</head>

<body class="bg-stone-50 text-stone-800 min-h-screen flex flex-col font-sans">
    <div id="app" v-cloak class="flex-grow max-w-2xl mx-auto w-full px-4 sm:px-6 py-8">

        <!-- Header / Global Nav -->
        <nav class="flex items-center justify-between mb-8">
            <a href="../index.html" class="flex items-center gap-2 group">
                <span
                    class="text-xl font-bold tracking-tight text-stone-800 group-hover:text-amber-600 transition-colors">TaiCalc</span>
            </a>
            <div class="flex gap-4 sm:gap-6 text-sm font-medium text-stone-500">
                <a href="../index.html" class="hover:text-stone-900 transition-colors">é¦–é </a>
                <a href="../categories/finance.html" class="hover:text-stone-900 transition-colors">é€€ä¼‘ç†è²¡</a>
                <a href="../categories/life.html" class="hover:text-stone-900 transition-colors">ç”Ÿæ´»</a>
                <a href="../categories/tools.html" class="hover:text-stone-900 transition-colors">å·¥å…·</a>
            </div>
        </nav>

        <!-- Breadcrumb -->
        <div class="text-sm text-stone-500 mb-6 flex items-center gap-2">
            <a href="../index.html" class="hover:text-stone-800 transition-colors">é¦–é </a>
            <span>/</span>
            <a href="../categories/tools.html" class="hover:text-stone-800 transition-colors">å¯¦ç”¨å·¥å…·</a>
            <span>/</span>
            <span class="text-stone-900 font-medium">å¤–é€æ”¶å…¥</span>
        </div>

        <header class="mb-8">
            <div class="flex items-center justify-between mb-2">
                <h1 class="text-2xl sm:text-3xl font-bold text-stone-800 tracking-tight">å¤–é€æ”¶å…¥è¨ˆç®—</h1>
                <span
                    class="text-xs px-2.5 py-1 rounded-full bg-emerald-100 text-emerald-700 border border-emerald-200 font-medium">æ·¨åˆ©è©¦ç®—</span>
            </div>
            <p class="text-stone-500 text-sm">æ‰£é™¤æ²¹éŒ¢ã€ä¿é¤Šå¾Œçš„å¯¦éš›æ™‚è–ª</p>
        </header>

        <main class="space-y-6">
            <!-- è¼¸å…¥å€å¡Š -->
            <div class="grid lg:grid-cols-2 gap-6">
                <section class="card bg-white rounded-2xl p-6 shadow-sm border border-stone-200">
                    <h2 class="text-lg font-bold text-stone-800 mb-4 flex items-center gap-2">ğŸ’° æ”¶å…¥èˆ‡å·¥æ™‚</h2>
                    <div class="space-y-4">
                        <div>
                            <label for="grossIncome" class="block text-xs font-medium text-stone-500 mb-1">æ¯æœˆç¸½æ”¶å…¥
                                (è·‘å–®é‡‘é¡+çå‹µ)</label>
                            <input id="grossIncome" type="number" v-model.number="grossIncome"
                                class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2.5 px-3 text-stone-800 text-lg font-bold focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="kilometers" class="block text-xs font-medium text-stone-500 mb-1">ç¸½é‡Œç¨‹
                                    (KM)</label>
                                <input id="kilometers" type="number" v-model.number="kilometers"
                                    class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2 px-3 text-stone-800 font-semibold focus:outline-none focus:border-emerald-500">
                            </div>
                            <div>
                                <label for="workHours" class="block text-xs font-medium text-stone-500 mb-1">ç¸½å·¥æ™‚
                                    (H)</label>
                                <input id="workHours" type="number" v-model.number="workHours"
                                    class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2 px-3 text-stone-800 font-semibold focus:outline-none focus:border-emerald-500">
                            </div>
                        </div>
                    </div>
                </section>

                <section class="card bg-white rounded-2xl p-6 shadow-sm border border-stone-200">
                    <h2 class="text-lg font-bold text-stone-800 mb-4 flex items-center gap-2">ğŸ›µ è»Šè¼›èˆ‡éš±æ€§æˆæœ¬</h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="gasPrice" class="block text-xs font-medium text-stone-500 mb-1">æ²¹åƒ¹
                                    ($/L)</label>
                                <input id="gasPrice" type="number" v-model.number="gasPrice"
                                    class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2 px-3 text-stone-800 focus:outline-none focus:border-emerald-500">
                            </div>
                            <div>
                                <label for="kmPerLiter" class="block text-xs font-medium text-stone-500 mb-1">æ²¹è€—
                                    (KM/L)</label>
                                <input id="kmPerLiter" type="number" v-model.number="kmPerLiter"
                                    class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2 px-3 text-stone-800 focus:outline-none focus:border-emerald-500">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="maintenancePerKm"
                                    class="block text-xs font-medium text-stone-500 mb-1">æ¯å…¬é‡Œä¿é¤Š (æ©Ÿæ²¹/è¼ªèƒ..)</label>
                                <div class="relative">
                                    <input id="maintenancePerKm" type="number" v-model.number="maintenancePerKm"
                                        step="0.1"
                                        class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2 px-3 text-stone-800 focus:outline-none focus:border-emerald-500 pl-8">
                                    <span class="absolute left-3 top-2 text-stone-400">$</span>
                                </div>
                            </div>
                            <div>
                                <label for="otherMonthlyCost"
                                    class="block text-xs font-medium text-stone-500 mb-1">å…¶ä»–æœˆé–‹éŠ· (ä¿éšª/ç¨…/è²»)</label>
                                <div class="relative">
                                    <input id="otherMonthlyCost" type="number" v-model.number="otherMonthlyCost"
                                        class="w-full bg-stone-50 border border-stone-200 rounded-xl py-2 px-3 text-stone-800 focus:outline-none focus:border-emerald-500 pl-8">
                                    <span class="absolute left-3 top-2 text-stone-400">$</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- çµæœå„€è¡¨æ¿ -->
            <div class="grid md:grid-cols-2 gap-6">
                <!-- æ ¸å¿ƒæ•¸æ“š -->
                <section
                    class="card bg-emerald-50 rounded-2xl p-6 border border-emerald-100 flex flex-col justify-between relative overflow-hidden">
                    <div
                        class="absolute right-0 top-0 w-32 h-32 bg-emerald-100 rounded-full blur-3xl -mr-10 -mt-10 opacity-60">
                    </div>

                    <div class="relative z-10">
                        <p class="text-sm font-bold text-emerald-800 mb-1">å¯¦è³ªæ·¨æ”¶å…¥ (Net Income)</p>
                        <p class="text-4xl font-extrabold text-emerald-600 tracking-tight mb-2">
                            <span class="text-2xl opacity-70">$</span>{{ netIncome }}
                        </p>
                        <div class="flex items-center gap-3 text-sm">
                            <span class="bg-white/60 px-2 py-1 rounded text-emerald-700 font-medium">å¯¦è–ª ${{ hourlyRate
                                }}</span>
                            <span class="bg-white/60 px-2 py-1 rounded text-emerald-700 font-medium">${{ perKm
                                }}/km</span>
                        </div>
                    </div>

                    <div class="relative z-10 pt-6 mt-6 border-t border-emerald-200/60 grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-xs text-emerald-600 mb-1">ç¸½æˆæœ¬ä½”æ¯”</p>
                            <p class="text-lg font-bold text-emerald-800">{{ costRatio }}%</p>
                        </div>
                        <div>
                            <p class="text-xs text-emerald-600 mb-1">é ä¼°ç¨…å‰ç²åˆ©</p>
                            <p class="text-lg font-bold text-emerald-800">{{ profitMargin }}%</p>
                        </div>
                    </div>
                </section>

                <!-- æˆæœ¬çµæ§‹åœ–è¡¨ -->
                <section class="card bg-white rounded-2xl p-6 shadow-sm border border-stone-200 flex items-center">
                    <div class="w-1/2">
                        <h3 class="text-sm font-bold text-stone-700 mb-4">æˆæœ¬çµæ§‹åˆ†æ</h3>
                        <ul class="space-y-2 text-xs">
                            <li class="flex justify-between">
                                <span class="flex items-center gap-1"><span
                                        class="w-2 h-2 rounded-full bg-rose-400"></span>æ²¹éŒ¢</span>
                                <span class="font-mono text-stone-600">${{ gasCost }}</span>
                            </li>
                            <li class="flex justify-between">
                                <span class="flex items-center gap-1"><span
                                        class="w-2 h-2 rounded-full bg-orange-400"></span>ä¿é¤Šè€—æ</span>
                                <span class="font-mono text-stone-600">${{ maintenanceTotal }}</span>
                            </li>
                            <li class="flex justify-between">
                                <span class="flex items-center gap-1"><span
                                        class="w-2 h-2 rounded-full bg-gray-400"></span>å›ºå®šé–‹éŠ·</span>
                                <span class="font-mono text-stone-600">${{ otherMonthlyCost }}</span>
                            </li>
                            <li
                                class="pt-2 mt-2 border-t border-dashed border-stone-100 flex justify-between font-bold">
                                <span class="text-stone-700">ç¸½æˆæœ¬</span>
                                <span class="text-rose-500">-${{ totalCost }}</span>
                            </li>
                        </ul>
                    </div>
                    <div class="w-1/2 flex justify-center">
                        <div class="chart-container w-32 h-32 relative">
                            <canvas ref="chartCanvas"></canvas>
                        </div>
                    </div>
                </section>
            </div>

            <div class="text-center text-xs text-stone-400 mt-8">
                ğŸ’¡ å»ºè­°ï¼šæ¯å…¬é‡Œä¿é¤Šæˆæœ¬ (æ©Ÿæ²¹/è¼ªèƒ/å‚³å‹•) ä¸€èˆ¬é€Ÿå…‹é”ç´„åœ¨ $0.5 ~ $1.5 ä¹‹é–“ã€‚
            </div>
        </main>

        <footer class="text-center mt-12 text-stone-400 text-sm pb-8">
            Â© 2026 TaiCalc
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const { createApp, ref, computed, watch, onMounted } = Vue

        createApp({
            setup() {
                const grossIncome = ref(45000)
                const kilometers = ref(1500)
                const gasPrice = ref(31.5)
                const kmPerLiter = ref(38)
                const workHours = ref(180)
                const maintenancePerKm = ref(0.8) // æ¯å…¬é‡Œä¿é¤Šè²»(è¼ªèƒæ©Ÿæ²¹)
                const otherMonthlyCost = ref(800) // å¼·åˆ¶éšª+ä»»æ„éšªæ”¤æ+ç¨…

                const chartCanvas = ref(null)
                let chartInstance = null

                // è¨ˆç®—å±¬æ€§
                const gasCostRaw = computed(() => (kilometers.value / kmPerLiter.value) * gasPrice.value)
                const maintenanceTotalRaw = computed(() => kilometers.value * maintenancePerKm.value)

                const gasCost = computed(() => Math.round(gasCostRaw.value).toLocaleString())
                const maintenanceTotal = computed(() => Math.round(maintenanceTotalRaw.value).toLocaleString())

                const totalCostRaw = computed(() => gasCostRaw.value + maintenanceTotalRaw.value + otherMonthlyCost.value)
                const totalCost = computed(() => Math.round(totalCostRaw.value).toLocaleString())

                const netIncomeRaw = computed(() => grossIncome.value - totalCostRaw.value)
                const netIncome = computed(() => Math.round(netIncomeRaw.value).toLocaleString())

                const hourlyRate = computed(() => workHours.value > 0 ? Math.round(netIncomeRaw.value / workHours.value) : 0)
                const perKm = computed(() => kilometers.value > 0 ? Math.round((netIncomeRaw.value / kilometers.value) * 10) / 10 : 0)

                const costRatio = computed(() => grossIncome.value > 0 ? Math.round((totalCostRaw.value / grossIncome.value) * 100) : 0)
                const profitMargin = computed(() => grossIncome.value > 0 ? Math.round((netIncomeRaw.value / grossIncome.value) * 100) : 0)

                // åœ–è¡¨
                const updateChart = () => {
                    if (!chartCanvas.value) return
                    if (chartInstance) chartInstance.destroy()

                    const net = Math.max(0, netIncomeRaw.value)
                    const gas = gasCostRaw.value
                    const maint = maintenanceTotalRaw.value + otherMonthlyCost.value

                    chartInstance = new Chart(chartCanvas.value, {
                        type: 'doughnut',
                        data: {
                            labels: ['æ·¨æ”¶å…¥', 'æ²¹éŒ¢', 'ä¿é¤Šé›œæ”¯'],
                            datasets: [{
                                data: [net, gas, maint],
                                backgroundColor: ['#10b981', '#fb7185', '#fb923c'], // Emerald-500, Rose-400, Orange-400
                                borderWidth: 0,
                                hoverOffset: 4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            cutout: '70%',
                            plugins: {
                                legend: { display: false },
                                tooltip: { enabled: false } // ç°¡åŒ–
                            }
                        }
                    })
                }

                watch([grossIncome, kilometers, gasPrice, kmPerLiter, workHours, maintenancePerKm, otherMonthlyCost], updateChart)
                onMounted(() => setTimeout(updateChart, 100))

                return {
                    grossIncome, kilometers, gasPrice, kmPerLiter, workHours, maintenancePerKm, otherMonthlyCost,
                    gasCost, maintenanceTotal, totalCost, netIncome, hourlyRate, perKm, costRatio, profitMargin,
                    chartCanvas
                }
            }
        }).mount('#app')
    </script>
</body>

</html>